<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Food - H·ªá Th·ªëng G·ª£i √ù M√≥n ƒÇn Th√¥ng Minh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'viet-gold': '#D4AF37',
                        'viet-red': '#DA020E',
                        'viet-green': '#228B22',
                        'bamboo': '#8FBC8F'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .nav-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .nav-item:hover {
            background: rgba(212, 175, 55, 0.1);
        }
        
        .nav-item.active {
            background: rgba(212, 175, 55, 0.2);
            border-bottom: 3px solid #D4AF37;
        }
        
        .mood-selector {
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 12px;
            border-radius: 50%;
            border: 3px solid transparent;
        }
        
        .mood-selector:hover {
            transform: scale(1.15);
            background: rgba(212, 175, 55, 0.15);
            border-color: rgba(212, 175, 55, 0.3);
        }
        
        .mood-selector.active {
            transform: scale(1.2);
            background: rgba(212, 175, 55, 0.25);
            border-color: #D4AF37;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }
        
        .slider-container input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 8px;
            background: linear-gradient(to right, #e5e7eb 0%, #e5e7eb 100%);
            outline: none;
            cursor: pointer;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #DA020E, #B91C1C);
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(218, 2, 14, 0.3);
            border: 2px solid white;
        }
        
        .dish-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            border: 2px solid transparent;
        }
        
        .dish-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border-color: rgba(212, 175, 55, 0.3);
        }
        
        .floating-action {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dasharray 0.35s;
            transform-origin: 50% 50%;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .meal-plan-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #D4AF37;
            transition: all 0.3s ease;
        }
        
        .meal-plan-item:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .recipe-step {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #28a745;
        }
        
        .ingredient-item {
            background: white;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .health-metric {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .community-post {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .community-post:hover {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="text-3xl">üçú</div>
                    <div>
                        <span class="text-xl font-bold text-viet-red">Smart Food</span>
                        <div class="text-xs text-gray-500">AI Food Recommendation System</div>
                    </div>
                </div>
                
                <!-- Navigation Menu -->
                <div class="hidden md:flex items-center space-x-1" id="mainNav">
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="home">üè† Trang ch·ªß</div>
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="recommendations">üéØ G·ª£i √Ω m√≥n ƒÉn</div>
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="meal-plan">üìÖ K·∫ø ho·∫°ch ƒÉn u·ªëng</div>
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="recipes">üìñ C√¥ng th·ª©c</div>
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="health">üí™ S·ª©c kh·ªèe</div>
                    <div class="nav-item px-4 py-2 rounded-lg font-medium text-gray-700" data-page="community">üë• C·ªông ƒë·ªìng</div>
                </div>
                
                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <div id="userMenu" class="hidden items-center space-x-3">
                        <div class="text-sm">
                            <div class="font-semibold" id="userName">Ch√†o b·∫°n!</div>
                            <div class="text-gray-500 text-xs" id="userLevel">Level 1</div>
                        </div>
                        <img id="userAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23D4AF37'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16'%3Eüë§%3C/text%3E%3C/svg%3E" class="w-10 h-10 rounded-full cursor-pointer">
                        <button id="logoutBtn" class="text-gray-500 hover:text-gray-700">üö™</button>
                    </div>
                    <div id="loginSection" class="flex items-center space-x-2">
                        <button id="loginBtn" class="bg-viet-red text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 transition-all">
                            ƒêƒÉng nh·∫≠p
                        </button>
                        <button id="registerBtn" class="border border-viet-red text-viet-red px-4 py-2 rounded-lg font-medium hover:bg-viet-red hover:text-white transition-all">
                            ƒêƒÉng k√Ω
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="text-4xl mb-4">üçú</div>
                <h2 class="text-2xl font-bold text-gray-900">ƒêƒÉng nh·∫≠p Smart Food</h2>
                <p class="text-gray-600 mt-2">Tr·∫£i nghi·ªám ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng AI</p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email ho·∫∑c s·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="text" id="loginEmail" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="example@email.com">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u</label>
                    <input type="password" id="loginPassword" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="flex items-center justify-between">
                    <label class="flex items-center">
                        <input type="checkbox" class="rounded border-gray-300 text-viet-red focus:ring-viet-red">
                        <span class="ml-2 text-sm text-gray-600">Ghi nh·ªõ ƒëƒÉng nh·∫≠p</span>
                    </label>
                    <a href="#" class="text-sm text-viet-red hover:underline">Qu√™n m·∫≠t kh·∫©u?</a>
                </div>
                <button type="submit" class="w-full bg-viet-red text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition-all">
                    ƒêƒÉng nh·∫≠p
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-gray-600">Ch∆∞a c√≥ t√†i kho·∫£n? 
                    <button id="switchToRegister" class="text-viet-red font-semibold hover:underline">ƒêƒÉng k√Ω ngay</button>
                </p>
            </div>
            
            <button id="closeLoginModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="text-4xl mb-4">üéØ</div>
                <h2 class="text-2xl font-bold text-gray-900">T·∫°o t√†i kho·∫£n Smart Food</h2>
                <p class="text-gray-600 mt-2">B·∫Øt ƒë·∫ßu h√†nh tr√¨nh ƒÉn u·ªëng th√¥ng minh</p>
            </div>
            
            <form id="registerForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">H·ªç v√† t√™n</label>
                    <input type="text" id="registerName" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="Nguy·ªÖn VƒÉn A">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="registerEmail" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="example@email.com">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="tel" id="registerPhone" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="0123456789">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u</label>
                    <input type="password" id="registerPassword" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                    <input type="password" id="confirmPassword" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="agreeTerms" class="rounded border-gray-300 text-viet-red focus:ring-viet-red">
                    <label for="agreeTerms" class="ml-2 text-sm text-gray-600">
                        T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" class="text-viet-red hover:underline">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> v√† <a href="#" class="text-viet-red hover:underline">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                    </label>
                </div>
                <button type="submit" class="w-full bg-viet-red text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition-all">
                    T·∫°o t√†i kho·∫£n
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-gray-600">ƒê√£ c√≥ t√†i kho·∫£n? 
                    <button id="switchToLogin" class="text-viet-red font-semibold hover:underline">ƒêƒÉng nh·∫≠p</button>
                </p>
            </div>
            
            <button id="closeRegisterModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Home Page -->
        <div id="homePage" class="page active">
            <!-- Hero Section -->
            <section class="hero-gradient text-white py-16 relative overflow-hidden rounded-2xl my-8">
                <div class="absolute inset-0 bg-black/10"></div>
                <div class="text-center relative z-10 px-8">
                    <div class="mb-8">
                        <div class="text-5xl mb-4">üéØ</div>
                        <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
                            H·ªá Th·ªëng G·ª£i √ù M√≥n ƒÇn Th√¥ng Minh
                        </h1>
                        <p class="text-lg md:text-xl mb-6 max-w-3xl mx-auto leading-relaxed">
                            S·ª≠ d·ª•ng AI ƒë·ªÉ ph√¢n t√≠ch <span class="text-yellow-300 font-semibold">6 y·∫øu t·ªë quan tr·ªçng</span><br>
                            v√† ƒë∆∞a ra g·ª£i √Ω m√≥n ƒÉn ho√†n h·∫£o d√†nh ri√™ng cho b·∫°n
                        </p>
                        <div class="flex flex-wrap justify-center gap-3 text-sm mb-8">
                            <span class="bg-white/20 px-3 py-1 rounded-full">üèãÔ∏è S·ª©c kh·ªèe</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full">‚è∞ Th·ªùi gian</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full">üìç ƒê·ªãa ƒëi·ªÉm</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full">üòã S·ªü th√≠ch</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full">üå¶Ô∏è T√¢m tr·∫°ng</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full">üéØ M·ª•c ti√™u</span>
                        </div>
                        <button class="nav-item bg-white text-viet-red px-8 py-4 rounded-xl font-bold text-lg hover:bg-gray-100 transition-all transform hover:scale-105" data-page="recommendations">
                            üöÄ B·∫Øt ƒë·∫ßu ngay
                        </button>
                    </div>
                </div>
            </section>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 py-16">
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">ü§ñ</div>
                    <h3 class="text-xl font-bold mb-4">AI Th√¥ng Minh</h3>
                    <p class="text-gray-600">Ph√¢n t√≠ch 6 y·∫øu t·ªë ƒë·ªÉ ƒë∆∞a ra g·ª£i √Ω m√≥n ƒÉn ph√π h·ª£p nh·∫•t v·ªõi b·∫°n</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">üìä</div>
                    <h3 class="text-xl font-bold mb-4">Theo D√µi S·ª©c Kh·ªèe</h3>
                    <p class="text-gray-600">Th·ªëng k√™ calories, dinh d∆∞·ª°ng v√† ti·∫øn ƒë·ªô s·ª©c kh·ªèe h√†ng ng√†y</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">üìÖ</div>
                    <h3 class="text-xl font-bold mb-4">K·∫ø Ho·∫°ch ƒÇn U·ªëng</h3>
                    <p class="text-gray-600">L·∫≠p k·∫ø ho·∫°ch b·ªØa ƒÉn th√¥ng minh cho c·∫£ tu·∫ßn</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">üìñ</div>
                    <h3 class="text-xl font-bold mb-4">Kho C√¥ng Th·ª©c</h3>
                    <p class="text-gray-600">H√†ng ngh√¨n c√¥ng th·ª©c n·∫•u ƒÉn v·ªõi h∆∞·ªõng d·∫´n chi ti·∫øt</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">üë•</div>
                    <h3 class="text-xl font-bold mb-4">C·ªông ƒê·ªìng</h3>
                    <p class="text-gray-600">Chia s·∫ª kinh nghi·ªám v√† h·ªçc h·ªèi t·ª´ c·ªông ƒë·ªìng y√™u ·∫©m th·ª±c</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                    <div class="text-5xl mb-4">üéØ</div>
                    <h3 class="text-xl font-bold mb-4">C√° Nh√¢n H√≥a</h3>
                    <p class="text-gray-600">ƒêi·ªÅu ch·ªânh tr·ªçng s·ªë theo s·ªü th√≠ch c√° nh√¢n</p>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="bg-white rounded-2xl p-8 shadow-lg my-16">
                <h2 class="text-3xl font-bold text-center mb-12">üìà Th·ªëng K√™ H·ªá Th·ªëng</h2>
                <div class="grid md:grid-cols-4 gap-8 text-center">
                    <div>
                        <div class="text-4xl font-bold text-viet-red mb-2">50,000+</div>
                        <div class="text-gray-600">Ng∆∞·ªùi d√πng</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-viet-red mb-2">1,500+</div>
                        <div class="text-gray-600">M√≥n ƒÉn</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-viet-red mb-2">95%</div>
                        <div class="text-gray-600">ƒê·ªô ch√≠nh x√°c AI</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-viet-red mb-2">24/7</div>
                        <div class="text-gray-600">H·ªó tr·ª£</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recommendations Page -->
        <div id="recommendationsPage" class="page py-8">
            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Left Sidebar - Controls -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Current Context -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <span class="mr-3">üìä</span>
                            Ng·ªØ c·∫£nh hi·ªán t·∫°i
                        </h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">üïê Th·ªùi gian:</span>
                                <span class="font-semibold" id="currentTime">Chi·ªÅu</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">üå§Ô∏è Th·ªùi ti·∫øt:</span>
                                <span class="font-semibold" id="currentWeather">N·∫Øng ·∫•m</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">üìç V·ªã tr√≠:</span>
                                <span class="font-semibold" id="currentLocation">H√† N·ªôi</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">üéØ B·ªØa ƒÉn:</span>
                                <span class="font-semibold" id="currentMeal">B·ªØa t·ªëi</span>
                            </div>
                        </div>
                    </div>

                    <!-- Mood Selector -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-6 flex items-center">
                            <span class="mr-3">üí≠</span>
                            T√¢m tr·∫°ng c·ªßa b·∫°n
                        </h3>
                        <div class="grid grid-cols-3 gap-3 justify-items-center">
                            <div class="text-center">
                                <div class="mood-selector" data-mood="sad" title="Bu·ªìn b√£">üò¢</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">Bu·ªìn</div>
                            </div>
                            <div class="text-center">
                                <div class="mood-selector" data-mood="tired" title="M·ªát m·ªèi">üò¥</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">M·ªát</div>
                            </div>
                            <div class="text-center">
                                <div class="mood-selector" data-mood="stressed" title="CƒÉng th·∫≥ng">üò∞</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">Stress</div>
                            </div>
                            <div class="text-center">
                                <div class="mood-selector active" data-mood="normal" title="B√¨nh th∆∞·ªùng">üòä</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">B√¨nh th∆∞·ªùng</div>
                            </div>
                            <div class="text-center">
                                <div class="mood-selector" data-mood="happy" title="Vui v·∫ª">üòÑ</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">Vui</div>
                            </div>
                            <div class="text-center">
                                <div class="mood-selector" data-mood="excited" title="H·ª©ng kh·ªüi">ü§©</div>
                                <div class="text-xs mt-2 text-gray-600 font-medium">H·ª©ng kh·ªüi</div>
                            </div>
                        </div>
                    </div>

                    <!-- Weight Sliders -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-6">‚öñÔ∏è ƒêi·ªÅu ch·ªânh tr·ªçng s·ªë</h3>
                        <div class="space-y-6">
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">üèãÔ∏è</span>S·ª©c kh·ªèe
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="healthValue">25%</span>
                                </div>
                                <input type="range" id="healthSlider" min="0" max="50" value="25" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">∆Øu ti√™n m√≥n ƒÉn healthy, √≠t calories</div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">‚è∞</span>Th·ªùi gian
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="timeValue">20%</span>
                                </div>
                                <input type="range" id="timeSlider" min="0" max="50" value="20" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">Ph√π h·ª£p v·ªõi th·ªùi ƒëi·ªÉm trong ng√†y</div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">üìç</span>ƒê·ªãa ƒëi·ªÉm
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="locationValue">15%</span>
                                </div>
                                <input type="range" id="locationSlider" min="0" max="50" value="15" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">Ph√π h·ª£p ƒÉn ·ªü nh√†/vƒÉn ph√≤ng/nh√† h√†ng</div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">üòã</span>S·ªü th√≠ch
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="tasteValue">15%</span>
                                </div>
                                <input type="range" id="tasteSlider" min="0" max="50" value="15" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">M√≥n quen thu·ªôc, d·ªÖ ƒÉn</div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">üå¶Ô∏è</span>T√¢m tr·∫°ng
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="moodValue">15%</span>
                                </div>
                                <input type="range" id="moodSlider" min="0" max="50" value="15" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">C·∫£i thi·ªán c·∫£m x√∫c hi·ªán t·∫°i</div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="flex justify-between mb-3">
                                    <span class="text-sm font-medium flex items-center">
                                        <span class="mr-2">üéØ</span>M·ª•c ti√™u
                                    </span>
                                    <span class="text-sm text-viet-red font-bold" id="goalValue">10%</span>
                                </div>
                                <input type="range" id="goalSlider" min="0" max="50" value="10" class="w-full">
                                <div class="text-xs text-gray-500 mt-1">Gi·∫£m c√¢n/tƒÉng c∆°/duy tr√¨ s·ª©c kh·ªèe</div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-3 bg-gray-50 rounded-xl">
                            <div class="text-sm font-semibold text-gray-700 mb-2">üìä T·ªïng tr·ªçng s·ªë: <span id="totalWeight">100%</span></div>
                            <div class="text-xs text-gray-500">ƒêi·ªÅu ch·ªânh c√°c thanh tr∆∞·ª£t ƒë·ªÉ thay ƒë·ªïi ƒë·ªô ∆∞u ti√™n</div>
                        </div>
                        
                        <button id="updateRecommendations" class="w-full mt-4 bg-gradient-to-r from-viet-red to-red-600 text-white py-3 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105 shadow-lg">
                            üîÑ C·∫≠p nh·∫≠t g·ª£i √Ω ngay
                        </button>
                    </div>

                    <!-- Quick Filters -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üîç B·ªô l·ªçc nhanh</h3>
                        <div class="space-y-4">
                            <select id="regionFilter" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent">
                                <option value="">üó∫Ô∏è T·∫•t c·∫£ mi·ªÅn</option>
                                <option value="north">üèîÔ∏è Mi·ªÅn B·∫Øc</option>
                                <option value="central">üèõÔ∏è Mi·ªÅn Trung</option>
                                <option value="south">üå¥ Mi·ªÅn Nam</option>
                                <option value="modern">üåü Hi·ªán ƒë·∫°i</option>
                            </select>
                            
                            <select id="mealTypeFilter" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent">
                                <option value="">üçΩÔ∏è Lo·∫°i b·ªØa ƒÉn</option>
                                <option value="breakfast">üåÖ S√°ng</option>
                                <option value="lunch">‚òÄÔ∏è Tr∆∞a</option>
                                <option value="dinner">üåô T·ªëi</option>
                                <option value="snack">üçø ƒÇn v·∫∑t</option>
                            </select>
                            
                            <select id="dietFilter" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red focus:border-transparent">
                                <option value="">ü•ó Ch·∫ø ƒë·ªô ƒÉn</option>
                                <option value="healthy">üíö Healthy</option>
                                <option value="protein">üí™ Protein cao</option>
                                <option value="lowcal">üî• √çt calories</option>
                                <option value="comfort">üè† Comfort food</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Main Content - Recommendations -->
                <div class="lg:col-span-3 space-y-6">
                    <!-- AI Analysis Display -->
                    <div class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-2xl p-6 shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold flex items-center">
                                <span class="mr-3">ü§ñ</span>
                                Ph√¢n t√≠ch AI
                            </h3>
                            <div class="bg-white/20 px-3 py-1 rounded-full text-sm font-semibold">
                                <span id="analysisStatus">ƒêang ph√¢n t√≠ch...</span>
                            </div>
                        </div>
                        <div id="aiAnalysis" class="text-lg leading-relaxed">
                            ƒêang ph√¢n t√≠ch 6 y·∫øu t·ªë ƒë·ªÉ t√¨m m√≥n ƒÉn ho√†n h·∫£o cho b·∫°n...
                        </div>
                    </div>

                    <!-- Recommended Dishes -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-semibold flex items-center">
                                <span class="mr-3">üéØ</span>
                                G·ª£i √Ω d√†nh cho b·∫°n
                            </h3>
                            <div class="flex items-center space-x-3">
                                <div class="text-sm text-gray-500">
                                    C·∫≠p nh·∫≠t: <span id="lastUpdate">v·ª´a xong</span>
                                </div>
                                <button id="refreshRecommendations" class="bg-viet-gold text-gray-900 px-4 py-2 rounded-xl font-medium hover:bg-yellow-400 transition-all transform hover:scale-105">
                                    üîÑ L√†m m·ªõi
                                </button>
                            </div>
                        </div>

                        <div id="recommendedDishes" class="grid gap-6">
                            <!-- Dishes will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Statistics -->
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-2xl p-6 text-center">
                            <div class="text-3xl mb-2">üéØ</div>
                            <div class="text-2xl font-bold" id="accuracyScore">94%</div>
                            <div class="text-sm opacity-90">ƒê·ªô ch√≠nh x√°c AI</div>
                        </div>
                        <div class="bg-gradient-to-r from-purple-400 to-pink-500 text-white rounded-2xl p-6 text-center">
                            <div class="text-3xl mb-2">üçú</div>
                            <div class="text-2xl font-bold" id="dishesAnalyzed">1,247</div>
                            <div class="text-sm opacity-90">M√≥n ƒë√£ ph√¢n t√≠ch</div>
                        </div>
                        <div class="bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-2xl p-6 text-center">
                            <div class="text-3xl mb-2">‚ö°</div>
                            <div class="text-2xl font-bold" id="responseTime">0.3s</div>
                            <div class="text-sm opacity-90">Th·ªùi gian ph·∫£n h·ªìi</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Plan Page -->
        <div id="mealPlanPage" class="page py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-4">üìÖ K·∫ø Ho·∫°ch ƒÇn U·ªëng Th√¥ng Minh</h1>
                <p class="text-gray-600">L·∫≠p k·∫ø ho·∫°ch b·ªØa ƒÉn cho c·∫£ tu·∫ßn d·ª±a tr√™n m·ª•c ti√™u s·ª©c kh·ªèe c·ªßa b·∫°n</p>
            </div>

            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Meal Plan Settings -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">‚öôÔ∏è C√†i ƒë·∫∑t k·∫ø ho·∫°ch</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üéØ M·ª•c ti√™u</label>
                                <select id="planGoal" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                    <option value="weightLoss">Gi·∫£m c√¢n</option>
                                    <option value="muscleGain">TƒÉng c∆°</option>
                                    <option value="maintenance">Duy tr√¨</option>
                                    <option value="bulking">TƒÉng c√¢n</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üî• Calories m·ª•c ti√™u/ng√†y</label>
                                <input type="number" id="targetCalories" value="2000" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üçΩÔ∏è S·ªë b·ªØa ƒÉn/ng√†y</label>
                                <select id="mealsPerDay" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                    <option value="3">3 b·ªØa ch√≠nh</option>
                                    <option value="4">3 b·ªØa + 1 snack</option>
                                    <option value="5">3 b·ªØa + 2 snack</option>
                                    <option value="6">6 b·ªØa nh·ªè</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üö´ Th·ª±c ph·∫©m tr√°nh</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-viet-red">
                                        <span class="ml-2 text-sm">ƒê·ªì chi√™n r√°n</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-viet-red">
                                        <span class="ml-2 text-sm">ƒê·ªì ng·ªçt</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-viet-red">
                                        <span class="ml-2 text-sm">Th·ª©c ƒÉn nhanh</span>
                                    </label>
                                </div>
                            </div>
                            
                            <button id="generatePlan" class="w-full bg-viet-red text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition-all">
                                üéØ T·∫°o k·∫ø ho·∫°ch m·ªõi
                            </button>
                        </div>
                    </div>

                    <!-- Weekly Stats -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üìä Th·ªëng k√™ tu·∫ßn</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Calories trung b√¨nh</span>
                                <span class="font-bold text-viet-red">1,950</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Protein (g)</span>
                                <span class="font-bold text-green-600">125</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Carbs (g)</span>
                                <span class="font-bold text-blue-600">220</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Fat (g)</span>
                                <span class="font-bold text-orange-600">65</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weekly Meal Plan -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-semibold">üóìÔ∏è K·∫ø ho·∫°ch tu·∫ßn n√†y</h3>
                            <div class="flex space-x-2">
                                <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-xl hover:bg-gray-200 transition-all">
                                    ‚Üê Tu·∫ßn tr∆∞·ªõc
                                </button>
                                <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-xl hover:bg-gray-200 transition-all">
                                    Tu·∫ßn sau ‚Üí
                                </button>
                            </div>
                        </div>

                        <div id="weeklyPlan" class="space-y-6">
                            <!-- Days will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recipes Page -->
        <div id="recipesPage" class="page py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-4">üìñ Kho C√¥ng Th·ª©c N·∫•u ƒÇn</h1>
                <p class="text-gray-600">Kh√°m ph√° h√†ng ngh√¨n c√¥ng th·ª©c n·∫•u ƒÉn v·ªõi h∆∞·ªõng d·∫´n chi ti·∫øt t·ª´ng b∆∞·ªõc</p>
            </div>

            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Recipe Filters -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üîç T√¨m ki·∫øm c√¥ng th·ª©c</h3>
                        <div class="space-y-4">
                            <input type="text" id="recipeSearch" placeholder="T√¨m m√≥n ƒÉn..." class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                            
                            <select id="recipeCategory" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                                <option value="main">M√≥n ch√≠nh</option>
                                <option value="soup">Canh/S√∫p</option>
                                <option value="appetizer">Khai v·ªã</option>
                                <option value="dessert">Tr√°ng mi·ªáng</option>
                                <option value="drink">ƒê·ªì u·ªëng</option>
                            </select>
                            
                            <select id="recipeDifficulty" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                <option value="">ƒê·ªô kh√≥</option>
                                <option value="easy">D·ªÖ (< 30 ph√∫t)</option>
                                <option value="medium">Trung b√¨nh (30-60 ph√∫t)</option>
                                <option value="hard">Kh√≥ (> 60 ph√∫t)</option>
                            </select>
                            
                            <select id="recipeServings" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                <option value="">S·ªë ng∆∞·ªùi ƒÉn</option>
                                <option value="1-2">1-2 ng∆∞·ªùi</option>
                                <option value="3-4">3-4 ng∆∞·ªùi</option>
                                <option value="5+">5+ ng∆∞·ªùi</option>
                            </select>
                        </div>
                    </div>

                    <!-- Popular Tags -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üè∑Ô∏è Tags ph·ªï bi·∫øn</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-viet-gold/20 text-viet-gold px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-viet-gold/30">#healthy</span>
                            <span class="bg-viet-red/20 text-viet-red px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-viet-red/30">#nhanh-g·ªçn</span>
                            <span class="bg-green-200 text-green-800 px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-green-300">#chay</span>
                            <span class="bg-blue-200 text-blue-800 px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-blue-300">#protein-cao</span>
                            <span class="bg-purple-200 text-purple-800 px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-purple-300">#√≠t-carb</span>
                            <span class="bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-orange-300">#truy·ªÅn-th·ªëng</span>
                        </div>
                    </div>
                </div>

                <!-- Recipe Grid -->
                <div class="lg:col-span-3">
                    <div class="flex items-center justify-between mb-6">
                        <div class="text-gray-600">
                            T√¨m th·∫•y <span class="font-semibold text-viet-red">1,247</span> c√¥ng th·ª©c
                        </div>
                        <select class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-viet-red">
                            <option>S·∫Øp x·∫øp theo ƒë·ªô ph·ªï bi·∫øn</option>
                            <option>M·ªõi nh·∫•t</option>
                            <option>ƒê√°nh gi√° cao nh·∫•t</option>
                            <option>Th·ªùi gian n·∫•u</option>
                        </select>
                    </div>

                    <div id="recipeGrid" class="grid md:grid-cols-2 xl:grid-cols-3 gap-6">
                        <!-- Recipes will be populated by JavaScript -->
                    </div>

                    <!-- Pagination -->
                    <div class="flex justify-center mt-12">
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">‚Üê</button>
                            <button class="px-4 py-2 bg-viet-red text-white rounded-lg">1</button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">2</button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">3</button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">...</button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">15</button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health Page -->
        <div id="healthPage" class="page py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-4">üí™ Theo D√µi S·ª©c Kh·ªèe</h1>
                <p class="text-gray-600">Th·ªëng k√™ chi ti·∫øt v·ªÅ dinh d∆∞·ª°ng v√† ti·∫øn ƒë·ªô s·ª©c kh·ªèe c·ªßa b·∫°n</p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Health Metrics -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Daily Overview -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-semibold mb-6">üìä T·ªïng quan h√¥m nay</h3>
                        <div class="grid md:grid-cols-4 gap-6">
                            <div class="health-metric">
                                <div class="text-3xl mb-2">üî•</div>
                                <div class="text-2xl font-bold">1,650</div>
                                <div class="text-sm opacity-90">/ 2,000 calories</div>
                                <div class="w-full bg-white/20 rounded-full h-2 mt-2">
                                    <div class="bg-white h-2 rounded-full" style="width: 82.5%"></div>
                                </div>
                            </div>
                            
                            <div class="health-metric">
                                <div class="text-3xl mb-2">ü•©</div>
                                <div class="text-2xl font-bold">95g</div>
                                <div class="text-sm opacity-90">/ 120g protein</div>
                                <div class="w-full bg-white/20 rounded-full h-2 mt-2">
                                    <div class="bg-white h-2 rounded-full" style="width: 79%"></div>
                                </div>
                            </div>
                            
                            <div class="health-metric">
                                <div class="text-3xl mb-2">üçû</div>
                                <div class="text-2xl font-bold">180g</div>
                                <div class="text-sm opacity-90">/ 250g carbs</div>
                                <div class="w-full bg-white/20 rounded-full h-2 mt-2">
                                    <div class="bg-white h-2 rounded-full" style="width: 72%"></div>
                                </div>
                            </div>
                            
                            <div class="health-metric">
                                <div class="text-3xl mb-2">ü•ë</div>
                                <div class="text-2xl font-bold">45g</div>
                                <div class="text-sm opacity-90">/ 65g fat</div>
                                <div class="w-full bg-white/20 rounded-full h-2 mt-2">
                                    <div class="bg-white h-2 rounded-full" style="width: 69%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Chart -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-semibold mb-6">üìà Bi·ªÉu ƒë·ªì tu·∫ßn</h3>
                        <div class="chart-container bg-gray-50 rounded-xl p-4">
                            <div class="text-center text-gray-500 mt-20">
                                üìä Bi·ªÉu ƒë·ªì calories v√† dinh d∆∞·ª°ng 7 ng√†y qua
                                <br><small>T√≠nh nƒÉng bi·ªÉu ƒë·ªì s·∫Ω ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi th∆∞ vi·ªán Chart.js</small>
                            </div>
                        </div>
                    </div>

                    <!-- Meal History -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-semibold mb-6">üçΩÔ∏è L·ªãch s·ª≠ b·ªØa ƒÉn h√¥m nay</h3>
                        <div class="space-y-4" id="mealHistory">
                            <!-- Meal history will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="space-y-6">
                    <!-- Quick Add Meal -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">‚ûï Th√™m b·ªØa ƒÉn</h3>
                        <div class="space-y-4">
                            <input type="text" placeholder="T√¨m m√≥n ƒÉn..." class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                            <select class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-viet-red">
                                <option>B·ªØa s√°ng</option>
                                <option>B·ªØa tr∆∞a</option>
                                <option>B·ªØa t·ªëi</option>
                                <option>ƒÇn v·∫∑t</option>
                            </select>
                            <button class="w-full bg-viet-red text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition-all">
                                Th√™m v√†o nh·∫≠t k√Ω
                            </button>
                        </div>
                    </div>

                    <!-- Health Goals -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üéØ M·ª•c ti√™u s·ª©c kh·ªèe</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm">Gi·∫£m c√¢n</span>
                                <span class="text-sm font-bold text-green-600">-2.5kg</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: 50%"></div>
                            </div>
                            <div class="text-xs text-gray-500">C√≤n 2.5kg n·ªØa ƒë·ªÉ ƒë·∫°t m·ª•c ti√™u</div>
                        </div>
                    </div>

                    <!-- Water Intake -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üíß L∆∞·ª£ng n∆∞·ªõc</h3>
                        <div class="text-center">
                            <div class="text-4xl mb-2">üíß</div>
                            <div class="text-2xl font-bold text-blue-600">1.8L</div>
                            <div class="text-sm text-gray-500 mb-4">/ 2.5L m·ª•c ti√™u</div>
                            <div class="grid grid-cols-4 gap-2 mb-4">
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-blue-500 h-8 rounded"></div>
                                <div class="bg-gray-200 h-8 rounded"></div>
                                <div class="bg-gray-200 h-8 rounded"></div>
                                <div class="bg-gray-200 h-8 rounded"></div>
                            </div>
                            <button class="bg-blue-500 text-white px-4 py-2 rounded-xl hover:bg-blue-600 transition-all">
                                + Th√™m 250ml
                            </button>
                        </div>
                    </div>

                    <!-- Weekly Summary -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üìã T√≥m t·∫Øt tu·∫ßn</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between">
                                <span>Calories trung b√¨nh</span>
                                <span class="font-bold">1,920</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ng√†y ƒë·∫°t m·ª•c ti√™u</span>
                                <span class="font-bold text-green-600">5/7</span>
                            </div>
                            <div class="flex justify-between">
                                <span>B·ªØa ƒÉn healthy</span>
                                <span class="font-bold text-green-600">18/21</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ƒêi·ªÉm s·ª©c kh·ªèe</span>
                                <span class="font-bold text-viet-gold">85/100</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Community Page -->
        <div id="communityPage" class="page py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-4">üë• C·ªông ƒê·ªìng ·∫®m Th·ª±c</h1>
                <p class="text-gray-600">Chia s·∫ª kinh nghi·ªám, h·ªçc h·ªèi v√† k·∫øt n·ªëi v·ªõi nh·ªØng ng∆∞·ªùi y√™u ·∫©m th·ª±c</p>
            </div>

            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Community Sidebar -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Create Post -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">‚úçÔ∏è T·∫°o b√†i vi·∫øt</h3>
                        <button class="w-full bg-viet-red text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition-all mb-3">
                            üìù Chia s·∫ª c√¥ng th·ª©c
                        </button>
                        <button class="w-full bg-viet-gold text-gray-900 py-3 rounded-xl font-semibold hover:bg-yellow-400 transition-all mb-3">
                            üì∏ ƒêƒÉng ·∫£nh m√≥n ƒÉn
                        </button>
                        <button class="w-full bg-green-500 text-white py-3 rounded-xl font-semibold hover:bg-green-600 transition-all">
                            üí¨ ƒê·∫∑t c√¢u h·ªèi
                        </button>
                    </div>

                    <!-- Popular Topics -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">üî• Ch·ªß ƒë·ªÅ hot</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">#m√≥n-ƒÉn-healthy</span>
                                <span class="text-xs bg-viet-red text-white px-2 py-1 rounded-full">1.2k</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">#gi·∫£m-c√¢n</span>
                                <span class="text-xs bg-viet-red text-white px-2 py-1 rounded-full">856</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">#n·∫•u-ƒÉn-nhanh</span>
                                <span class="text-xs bg-viet-red text-white px-2 py-1 rounded-full">743</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">#m√≥n-chay</span>
                                <span class="text-xs bg-viet-red text-white px-2 py-1 rounded-full">621</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">#·∫©m-th·ª±c-vi·ªát</span>
                                <span class="text-xs bg-viet-red text-white px-2 py-1 rounded-full">589</span>
                            </div>
                        </div>
                    </div>

                    <!-- Top Contributors -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold mb-4">‚≠ê Ng∆∞·ªùi ƒë√≥ng g√≥p h√†ng ƒë·∫ßu</h3>
                        <div class="space-y-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-viet-gold rounded-full flex items-center justify-center text-white font-bold">1</div>
                                <div>
                                    <div class="font-semibold text-sm">Chef Minh</div>
                                    <div class="text-xs text-gray-500">245 c√¥ng th·ª©c</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">2</div>
                                <div>
                                    <div class="font-semibold text-sm">Healthy Mom</div>
                                    <div class="text-xs text-gray-500">198 c√¥ng th·ª©c</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-orange-400 rounded-full flex items-center justify-center text-white font-bold">3</div>
                                <div>
                                    <div class="font-semibold text-sm">Foodie H√† N·ªôi</div>
                                    <div class="text-xs text-gray-500">156 c√¥ng th·ª©c</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Feed -->
                <div class="lg:col-span-3">
                    <!-- Filter Tabs -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <div class="flex space-x-4">
                            <button class="px-4 py-2 bg-viet-red text-white rounded-xl font-medium">üî• M·ªõi nh·∫•t</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200">‚≠ê Ph·ªï bi·∫øn</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200">üë• ƒêang theo d√µi</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200">‚ùì C√¢u h·ªèi</button>
                        </div>
                    </div>

                    <!-- Community Posts -->
                    <div id="communityFeed" class="space-y-6">
                        <!-- Posts will be populated by JavaScript -->
                    </div>

                    <!-- Load More -->
                    <div class="text-center mt-8">
                        <button class="bg-gray-100 text-gray-700 px-6 py-3 rounded-xl font-medium hover:bg-gray-200 transition-all">
                            Xem th√™m b√†i vi·∫øt
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating AI Chat Button -->
    <div class="floating-action">
        <button id="aiChatBtn" class="bg-gradient-to-r from-viet-gold to-yellow-400 text-gray-900 p-4 rounded-full shadow-2xl hover:from-yellow-400 hover:to-yellow-500 transition-all transform hover:scale-110 pulse">
            <div class="text-2xl">ü§ñ</div>
        </button>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification bg-white rounded-xl shadow-2xl p-4 max-w-sm">
        <div class="flex items-center space-x-3">
            <div class="text-2xl" id="notificationIcon">‚úÖ</div>
            <div>
                <div class="font-semibold" id="notificationTitle">Th√†nh c√¥ng!</div>
                <div class="text-sm text-gray-600" id="notificationMessage">Thao t√°c ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán</div>
            </div>
        </div>
    </div>

    <script>
        // Global variables and data
        let currentUser = null;
        let currentPage = 'home';
        let selectedMood = 'normal';
        let userWeights = {
            health: 25,
            time: 20,
            location: 15,
            taste: 15,
            mood: 15,
            goal: 10
        };

        // Sample data
        const dishes = [
            {
                id: 1,
                name: "Ph·ªü B√≤ H√† N·ªôi",
                region: "north",
                type: "breakfast",
                calories: 350,
                protein: 25,
                carbs: 45,
                fat: 8,
                fiber: 3,
                image: "üçú",
                description: "M√≥n ph·ªü truy·ªÅn th·ªëng v·ªõi n∆∞·ªõc d√πng trong v·∫Øt, th·ªãt b√≤ t∆∞∆°i ngon v√† b√°nh ph·ªü dai ngon",
                price: "45,000ƒë",
                prepTime: 5,
                healthScore: 85,
                comfortLevel: 95,
                timeScores: { morning: 95, afternoon: 70, evening: 60, night: 40 },
                locationScores: { home: 60, office: 40, restaurant: 95, street: 80 },
                weatherScores: { hot: 60, cold: 95, rainy: 90 },
                moodBoosts: { sad: 25, tired: 20, stressed: 30, happy: 15, excited: 10, normal: 20 },
                goalAlignment: { weightLoss: 70, muscleGain: 80, maintenance: 90, energy: 85 },
                tasteProfile: { familiar: 95, adventurous: 30, comfort: 90, healthy: 75 },
                ingredients: ["th·ªãt b√≤", "b√°nh ph·ªü", "h√†nh l√°", "ng√≤ gai", "g·ª´ng"],
                tags: ["truy·ªÅn th·ªëng", "n√≥ng", "ƒë·∫≠m ƒë√†", "b·ªï d∆∞·ª°ng", "mi·ªÅn b·∫Øc"]
            },
            {
                id: 2,
                name: "Salad Quinoa B∆°",
                region: "modern",
                type: "lunch",
                calories: 280,
                protein: 15,
                carbs: 25,
                fat: 18,
                fiber: 12,
                image: "ü•ó",
                description: "Salad quinoa v·ªõi b∆°, c√† chua cherry, d∆∞a chu·ªôt v√† s·ªët chanh d√¢y t∆∞∆°i m√°t",
                price: "75,000ƒë",
                prepTime: 10,
                healthScore: 95,
                comfortLevel: 60,
                timeScores: { morning: 70, afternoon: 95, evening: 80, night: 50 },
                locationScores: { home: 85, office: 90, restaurant: 80, street: 30 },
                weatherScores: { hot: 95, cold: 40, rainy: 70 },
                moodBoosts: { sad: 10, tired: 30, stressed: 20, happy: 25, excited: 20, normal: 20 },
                goalAlignment: { weightLoss: 95, muscleGain: 60, maintenance: 85, energy: 90 },
                tasteProfile: { familiar: 40, adventurous: 80, comfort: 30, healthy: 95 },
                ingredients: ["quinoa", "b∆°", "c√† chua cherry", "d∆∞a chu·ªôt", "chanh d√¢y"],
                tags: ["healthy", "superfood", "√≠t calories", "t∆∞∆°i m√°t", "hi·ªán ƒë·∫°i"]
            },
            {
                id: 3,
                name: "B√∫n B√≤ Hu·∫ø",
                region: "central",
                type: "lunch",
                calories: 420,
                protein: 28,
                carbs: 55,
                fat: 15,
                fiber: 4,
                image: "üç≤",
                description: "B√∫n b√≤ cay n·ªìng ƒë·∫∑c tr∆∞ng mi·ªÅn Trung v·ªõi ch·∫£ cua, gi√≤ heo v√† n∆∞·ªõc d√πng ƒë·∫≠m ƒë√†",
                price: "50,000ƒë",
                prepTime: 8,
                healthScore: 75,
                comfortLevel: 90,
                timeScores: { morning: 60, afternoon: 95, evening: 80, night: 50 },
                locationScores: { home: 70, office: 50, restaurant: 90, street: 85 },
                weatherScores: { hot: 70, cold: 90, rainy: 95 },
                moodBoosts: { sad: 20, tired: 15, stressed: 10, happy: 30, excited: 35, normal: 25 },
                goalAlignment: { weightLoss: 60, muscleGain: 75, maintenance: 85, energy: 80 },
                tasteProfile: { familiar: 85, adventurous: 60, comfort: 85, healthy: 70 },
                ingredients: ["b√∫n", "th·ªãt b√≤", "ch·∫£ cua", "gi√≤ heo", "s·∫£", "·ªõt"],
                tags: ["cay", "ƒë·∫≠m ƒë√†", "mi·ªÅn trung", "n√≥ng h·ªïi", "truy·ªÅn th·ªëng"]
            }
        ];

        const recipes = [
            {
                id: 1,
                name: "Ph·ªü B√≤ H√† N·ªôi",
                image: "üçú",
                difficulty: "medium",
                time: 45,
                servings: 4,
                rating: 4.8,
                category: "main",
                description: "C√¥ng th·ª©c ph·ªü b√≤ truy·ªÅn th·ªëng H√† N·ªôi v·ªõi n∆∞·ªõc d√πng trong v·∫Øt",
                ingredients: [
                    { name: "X∆∞∆°ng b√≤", amount: "1kg", calories: 200 },
                    { name: "Th·ªãt b√≤", amount: "500g", calories: 800 },
                    { name: "B√°nh ph·ªü", amount: "400g", calories: 400 },
                    { name: "H√†nh t√¢y", amount: "2 c·ªß", calories: 80 },
                    { name: "G·ª´ng", amount: "50g", calories: 20 }
                ],
                steps: [
                    "Ninh x∆∞∆°ng b√≤ trong 3-4 ti·∫øng ƒë·ªÉ c√≥ n∆∞·ªõc d√πng trong",
                    "N∆∞·ªõng h√†nh t√¢y v√† g·ª´ng cho th∆°m",
                    "Th√™m gia v·ªã: h·ªìi, qu·∫ø, th·∫£o qu·∫£",
                    "Lu·ªôc b√°nh ph·ªü v√† th√°i th·ªãt b√≤ m·ªèng",
                    "Tr√¨nh b√†y v√† th∆∞·ªüng th·ª©c n√≥ng"
                ],
                tags: ["truy·ªÅn th·ªëng", "mi·ªÅn b·∫Øc", "n√≥ng h·ªïi"],
                nutrition: { calories: 350, protein: 25, carbs: 45, fat: 8 }
            },
            {
                id: 2,
                name: "Salad Quinoa Healthy",
                image: "ü•ó",
                difficulty: "easy",
                time: 20,
                servings: 2,
                rating: 4.6,
                category: "main",
                description: "Salad quinoa b·ªï d∆∞·ª°ng v·ªõi rau c·ªß t∆∞∆°i v√† s·ªët chanh d√¢y",
                ingredients: [
                    { name: "Quinoa", amount: "200g", calories: 220 },
                    { name: "B∆°", amount: "1 tr√°i", calories: 160 },
                    { name: "C√† chua cherry", amount: "150g", calories: 30 },
                    { name: "D∆∞a chu·ªôt", amount: "1 tr√°i", calories: 15 },
                    { name: "Chanh d√¢y", amount: "2 tr√°i", calories: 20 }
                ],
                steps: [
                    "N·∫•u quinoa theo h∆∞·ªõng d·∫´n tr√™n bao b√¨",
                    "Th√°i b∆°, c√† chua cherry v√† d∆∞a chu·ªôt",
                    "Pha s·ªët chanh d√¢y v·ªõi m·∫≠t ong",
                    "Tr·ªôn t·∫•t c·∫£ nguy√™n li·ªáu v·ªõi s·ªët",
                    "Trang tr√≠ v√† th∆∞·ªüng th·ª©c"
                ],
                tags: ["healthy", "superfood", "√≠t calories"],
                nutrition: { calories: 280, protein: 15, carbs: 25, fat: 18 }
            }
        ];

        const communityPosts = [
            {
                id: 1,
                author: "Chef Minh",
                avatar: "üë®‚Äçüç≥",
                time: "2 gi·ªù tr∆∞·ªõc",
                type: "recipe",
                title: "B√≠ quy·∫øt l√†m ph·ªü b√≤ n∆∞·ªõc d√πng trong v·∫Øt",
                content: "Sau 10 nƒÉm l√†m ngh·ªÅ, t√¥i mu·ªën chia s·∫ª b√≠ quy·∫øt ƒë·ªÉ c√≥ n∆∞·ªõc d√πng ph·ªü trong v·∫Øt v√† th∆°m ngon. ƒêi·ªÅu quan tr·ªçng nh·∫•t l√†...",
                image: "üçú",
                likes: 245,
                comments: 32,
                shares: 18,
                tags: ["ph·ªü", "b√≠-quy·∫øt", "n∆∞·ªõc-d√πng"]
            },
            {
                id: 2,
                author: "Healthy Mom",
                avatar: "üë©‚Äçüç≥",
                time: "4 gi·ªù tr∆∞·ªõc",
                type: "photo",
                title: "B·ªØa s√°ng healthy cho c·∫£ gia ƒë√¨nh",
                content: "Smoothie bowl v·ªõi granola t·ª± l√†m v√† tr√°i c√¢y t∆∞∆°i. C√°c b√© r·∫•t th√≠ch v√† ƒë·∫ßy ƒë·ªß dinh d∆∞·ª°ng cho ng√†y m·ªõi!",
                image: "üçì",
                likes: 189,
                comments: 24,
                shares: 12,
                tags: ["healthy", "b·ªØa-s√°ng", "gia-ƒë√¨nh"]
            },
            {
                id: 3,
                author: "Foodie H√† N·ªôi",
                avatar: "üçΩÔ∏è",
                time: "6 gi·ªù tr∆∞·ªõc",
                type: "question",
                title: "L√†m sao ƒë·ªÉ b√°nh m√¨ gi√≤n l√¢u h∆°n?",
                content: "M√¨nh hay l√†m b√°nh m√¨ ·ªü nh√† nh∆∞ng kh√¥ng gi√≤n ƒë∆∞·ª£c l√¢u nh∆∞ ngo√†i h√†ng. C√≥ b·∫°n n√†o bi·∫øt b√≠ quy·∫øt kh√¥ng ·∫°?",
                image: "ü•ñ",
                likes: 67,
                comments: 45,
                shares: 8,
                tags: ["b√°nh-m√¨", "c√¢u-h·ªèi", "b√≠-quy·∫øt"]
            }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
            initializeAuth();
            initializeRecommendations();
            initializeMealPlan();
            initializeRecipes();
            initializeHealth();
            initializeCommunity();
            
            // Check for saved user session
            const savedUser = localStorage.getItem('smartFoodUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showUserMenu();
            }
            
            updateCurrentContext();
            setInterval(updateCurrentContext, 30000);
        });

        // Navigation system
        function initializeNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetPage = this.dataset.page;
                    if (targetPage) {
                        navigateToPage(targetPage);
                    }
                });
            });
        }

        function navigateToPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show target page
            const targetPage = document.getElementById(pageName + 'Page');
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageName;
                
                // Update navigation active state
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-page="${pageName}"]`).classList.add('active');
                
                // Load page-specific content
                loadPageContent(pageName);
            }
        }

        function loadPageContent(pageName) {
            switch(pageName) {
                case 'recommendations':
                    updateRecommendations();
                    break;
                case 'meal-plan':
                    generateWeeklyPlan();
                    break;
                case 'recipes':
                    displayRecipes();
                    break;
                case 'health':
                    updateHealthData();
                    break;
                case 'community':
                    displayCommunityPosts();
                    break;
            }
        }

        // Authentication system
        function initializeAuth() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            const closeLoginModal = document.getElementById('closeLoginModal');
            const closeRegisterModal = document.getElementById('closeRegisterModal');
            const switchToRegister = document.getElementById('switchToRegister');
            const switchToLogin = document.getElementById('switchToLogin');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const logoutBtn = document.getElementById('logoutBtn');

            loginBtn.addEventListener('click', () => showModal(loginModal));
            registerBtn.addEventListener('click', () => showModal(registerModal));
            closeLoginModal.addEventListener('click', () => hideModal(loginModal));
            closeRegisterModal.addEventListener('click', () => hideModal(registerModal));
            
            switchToRegister.addEventListener('click', () => {
                hideModal(loginModal);
                showModal(registerModal);
            });
            
            switchToLogin.addEventListener('click', () => {
                hideModal(registerModal);
                showModal(loginModal);
            });

            loginForm.addEventListener('submit', handleLogin);
            registerForm.addEventListener('submit', handleRegister);
            logoutBtn.addEventListener('click', handleLogout);
        }

        function showModal(modal) {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function hideModal(modal) {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Simulate login (in real app, this would be an API call)
            if (email && password) {
                currentUser = {
                    id: 1,
                    name: email.split('@')[0] || 'User',
                    email: email,
                    level: 1,
                    joinDate: new Date().toISOString(),
                    preferences: { ...userWeights },
                    history: []
                };
                
                localStorage.setItem('smartFoodUser', JSON.stringify(currentUser));
                showUserMenu();
                hideModal(document.getElementById('loginModal'));
                showNotification('‚úÖ', 'ƒêƒÉng nh·∫≠p th√†nh c√¥ng!', 'Ch√†o m·ª´ng b·∫°n quay l·∫°i Smart Food');
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            if (!agreeTerms) {
                showNotification('‚ö†Ô∏è', 'L·ªói', 'Vui l√≤ng ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('‚ö†Ô∏è', 'L·ªói', 'M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp');
                return;
            }
            
            if (name && email && password) {
                currentUser = {
                    id: Date.now(),
                    name: name,
                    email: email,
                    phone: phone,
                    level: 1,
                    joinDate: new Date().toISOString(),
                    preferences: { ...userWeights },
                    history: []
                };
                
                localStorage.setItem('smartFoodUser', JSON.stringify(currentUser));
                showUserMenu();
                hideModal(document.getElementById('registerModal'));
                showNotification('üéâ', 'ƒêƒÉng k√Ω th√†nh c√¥ng!', 'Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi Smart Food');
            }
        }

        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('smartFoodUser');
            hideUserMenu();
            navigateToPage('home');
            showNotification('üëã', 'ƒêƒÉng xu·∫•t th√†nh c√¥ng', 'H·∫πn g·∫∑p l·∫°i b·∫°n!');
        }

        function showUserMenu() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('hidden');
            document.getElementById('userMenu').classList.add('flex');
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userLevel').textContent = `Level ${currentUser.level}`;
        }

        function hideUserMenu() {
            document.getElementById('userMenu').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('flex');
            document.getElementById('loginSection').classList.remove('hidden');
        }

        // Recommendations system (from previous code)
        function initializeRecommendations() {
            initializeSliders();
            initializeMoodSelectors();
            initializeFilters();
            
            document.getElementById('updateRecommendations').addEventListener('click', updateRecommendations);
            document.getElementById('refreshRecommendations').addEventListener('click', updateRecommendations);
        }

        function initializeSliders() {
            const sliders = ['health', 'time', 'location', 'taste', 'mood', 'goal'];
            sliders.forEach(slider => {
                const sliderElement = document.getElementById(slider + 'Slider');
                const valueElement = document.getElementById(slider + 'Value');
                
                if (sliderElement && valueElement) {
                    sliderElement.addEventListener('input', function() {
                        const value = parseInt(this.value);
                        userWeights[slider] = value;
                        valueElement.textContent = value + '%';
                        updateTotalWeight();
                        
                        clearTimeout(window.sliderTimeout);
                        window.sliderTimeout = setTimeout(updateRecommendations, 500);
                    });
                }
            });
        }

        function initializeMoodSelectors() {
            const moodSelectors = document.querySelectorAll('.mood-selector');
            moodSelectors.forEach(selector => {
                selector.addEventListener('click', function() {
                    moodSelectors.forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                    selectedMood = this.dataset.mood;
                    updateRecommendations();
                });
            });
        }

        function initializeFilters() {
            ['regionFilter', 'mealTypeFilter', 'dietFilter'].forEach(filterId => {
                const element = document.getElementById(filterId);
                if (element) {
                    element.addEventListener('change', updateRecommendations);
                }
            });
        }

        function updateTotalWeight() {
            const total = Object.values(userWeights).reduce((sum, weight) => sum + weight, 0);
            const totalElement = document.getElementById('totalWeight');
            if (totalElement) {
                totalElement.textContent = total + '%';
            }
        }

        function updateCurrentContext() {
            const now = new Date();
            const hour = now.getHours();
            
            let timeText = '';
            if (hour >= 5 && hour < 11) timeText = 'S√°ng';
            else if (hour >= 11 && hour < 14) timeText = 'Tr∆∞a';
            else if (hour >= 14 && hour < 18) timeText = 'Chi·ªÅu';
            else if (hour >= 18 && hour < 22) timeText = 'T·ªëi';
            else timeText = 'ƒê√™m';
            
            const timeElement = document.getElementById('currentTime');
            if (timeElement) timeElement.textContent = timeText;
            
            const weatherOptions = ['N·∫Øng ·∫•m', 'M√°t m·∫ª', 'M∆∞a nh·∫π', 'N√≥ng', 'Se l·∫°nh'];
            const weatherElement = document.getElementById('currentWeather');
            if (weatherElement) {
                weatherElement.textContent = weatherOptions[Math.floor(Math.random() * weatherOptions.length)];
            }
            
            let mealText = '';
            if (hour >= 6 && hour < 10) mealText = 'B·ªØa s√°ng';
            else if (hour >= 11 && hour < 14) mealText = 'B·ªØa tr∆∞a';
            else if (hour >= 17 && hour < 21) mealText = 'B·ªØa t·ªëi';
            else mealText = 'ƒÇn v·∫∑t';
            
            const mealElement = document.getElementById('currentMeal');
            if (mealElement) mealElement.textContent = mealText;
        }

        function updateRecommendations() {
            const analysisStatus = document.getElementById('analysisStatus');
            const aiAnalysis = document.getElementById('aiAnalysis');
            
            if (analysisStatus) analysisStatus.textContent = 'ƒêang ph√¢n t√≠ch...';
            if (aiAnalysis) aiAnalysis.innerHTML = 'üß† ƒêang ph√¢n t√≠ch 6 y·∫øu t·ªë ƒë·ªÉ t√¨m m√≥n ƒÉn ho√†n h·∫£o...';
            
            setTimeout(() => {
                const recommendations = calculateRecommendations();
                displayRecommendations(recommendations);
                updateAIAnalysis(recommendations);
                updateStats();
                
                if (analysisStatus) analysisStatus.textContent = 'Ho√†n th√†nh';
                const lastUpdate = document.getElementById('lastUpdate');
                if (lastUpdate) lastUpdate.textContent = 'v·ª´a xong';
            }, 1000);
        }

        function calculateRecommendations() {
            // Simplified recommendation calculation
            const scoredDishes = dishes.map(dish => ({
                ...dish,
                totalScore: Math.floor(Math.random() * 40) + 60,
                matchPercentage: Math.floor(Math.random() * 30) + 70,
                reasons: ['Ph√π h·ª£p v·ªõi t√¢m tr·∫°ng hi·ªán t·∫°i', 'Healthy v√† b·ªï d∆∞·ª°ng', 'D·ªÖ ch·∫ø bi·∫øn']
            }));
            
            scoredDishes.sort((a, b) => b.totalScore - a.totalScore);
            
            return {
                dishes: scoredDishes.slice(0, 6),
                context: {
                    mood: selectedMood,
                    weights: { ...userWeights }
                }
            };
        }

        function displayRecommendations(recommendations) {
            const container = document.getElementById('recommendedDishes');
            if (!container) return;
            
            container.innerHTML = '';
            
            recommendations.dishes.forEach(dish => {
                const dishCard = document.createElement('div');
                dishCard.className = 'dish-card p-6 cursor-pointer';
                
                dishCard.innerHTML = `
                    <div class="flex items-start space-x-4">
                        <div class="text-6xl flex-shrink-0">${dish.image}</div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <h4 class="font-bold text-xl text-gray-900 leading-tight mb-1">${dish.name}</h4>
                                    <div class="flex items-center space-x-2 text-sm text-gray-500">
                                        <span class="bg-viet-gold/20 text-viet-gold px-2 py-1 rounded-lg">${getRegionText(dish.region)}</span>
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-lg">${getTypeText(dish.type)}</span>
                                    </div>
                                </div>
                                <div class="text-right ml-4">
                                    <div class="text-2xl font-bold text-viet-gold">${dish.matchPercentage}%</div>
                                    <div class="text-xs text-gray-500">Ph√π h·ª£p</div>
                                </div>
                            </div>
                            
                            <p class="text-gray-600 text-sm mb-4 leading-relaxed">${dish.description}</p>
                            
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs mb-4">
                                <div class="bg-orange-50 text-orange-800 px-2 py-1 rounded-lg text-center">
                                    <div class="font-bold">${dish.calories}</div>
                                    <div>calories</div>
                                </div>
                                <div class="bg-blue-50 text-blue-800 px-2 py-1 rounded-lg text-center">
                                    <div class="font-bold">${dish.protein}g</div>
                                    <div>protein</div>
                                </div>
                                <div class="bg-green-50 text-green-800 px-2 py-1 rounded-lg text-center">
                                    <div class="font-bold">${dish.prepTime}p</div>
                                    <div>chu·∫©n b·ªã</div>
                                </div>
                                <div class="bg-purple-50 text-purple-800 px-2 py-1 rounded-lg text-center">
                                    <div class="font-bold">${dish.price}</div>
                                    <div>gi√°</div>
                                </div>
                            </div>
                            
                            <div class="flex flex-wrap gap-2">
                                <button class="bg-gradient-to-r from-viet-red to-red-600 text-white px-4 py-2 rounded-xl text-sm font-semibold hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105" onclick="orderDish(${dish.id})">
                                    üõµ ƒê·∫∑t m√≥n
                                </button>
                                <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-xl text-sm font-semibold hover:bg-gray-200 transition-all" onclick="viewRecipe(${dish.id})">
                                    üìù C√¥ng th·ª©c
                                </button>
                                <button class="bg-pink-100 text-pink-700 px-4 py-2 rounded-xl text-sm font-semibold hover:bg-pink-200 transition-all" onclick="addToFavorites(${dish.id})">
                                    ‚ù§Ô∏è Y√™u th√≠ch
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(dishCard);
            });
        }

        function updateAIAnalysis(recommendations) {
            const aiAnalysis = document.getElementById('aiAnalysis');
            if (!aiAnalysis) return;
            
            const topDish = recommendations.dishes[0];
            
            const analysisText = `
                <div class="space-y-3">
                    <p class="text-lg">
                        üéØ D·ª±a tr√™n ph√¢n t√≠ch <strong>6 y·∫øu t·ªë</strong>, t√¥i g·ª£i √Ω <strong>${topDish.name}</strong> 
                        v·ªõi ƒë·ªô ph√π h·ª£p <strong>${topDish.matchPercentage}%</strong>
                    </p>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm">
                        <div class="bg-white/20 rounded-lg p-3">
                            <div class="font-semibold">T√¢m tr·∫°ng</div>
                            <div>${getMoodText(selectedMood)}</div>
                        </div>
                        <div class="bg-white/20 rounded-lg p-3">
                            <div class="font-semibold">Calories</div>
                            <div>${topDish.calories} kcal</div>
                        </div>
                        <div class="bg-white/20 rounded-lg p-3">
                            <div class="font-semibold">Th·ªùi gian</div>
                            <div>${topDish.prepTime} ph√∫t</div>
                        </div>
                    </div>
                    <p class="text-sm opacity-90">
                        üí° AI ƒë√£ ph√¢n t√≠ch ${dishes.length} m√≥n ƒÉn v√† ch·ªçn ra nh·ªØng m√≥n ph√π h·ª£p nh·∫•t v·ªõi s·ªü th√≠ch c·ªßa b·∫°n
                    </p>
                </div>
            `;
            
            aiAnalysis.innerHTML = analysisText;
        }

        function updateStats() {
            const accuracy = 92 + Math.floor(Math.random() * 6);
            const analyzed = 1200 + Math.floor(Math.random() * 100);
            const responseTime = (0.2 + Math.random() * 0.3).toFixed(1);
            
            const accuracyElement = document.getElementById('accuracyScore');
            const analyzedElement = document.getElementById('dishesAnalyzed');
            const responseElement = document.getElementById('responseTime');
            
            if (accuracyElement) accuracyElement.textContent = accuracy + '%';
            if (analyzedElement) analyzedElement.textContent = analyzed.toLocaleString();
            if (responseElement) responseElement.textContent = responseTime + 's';
        }

        // Meal Plan system
        function initializeMealPlan() {
            const generateBtn = document.getElementById('generatePlan');
            if (generateBtn) {
                generateBtn.addEventListener('click', generateWeeklyPlan);
            }
        }

        function generateWeeklyPlan() {
            const container = document.getElementById('weeklyPlan');
            if (!container) return;
            
            const days = ['Th·ª© 2', 'Th·ª© 3', 'Th·ª© 4', 'Th·ª© 5', 'Th·ª© 6', 'Th·ª© 7', 'Ch·ªß nh·∫≠t'];
            const meals = ['S√°ng', 'Tr∆∞a', 'T·ªëi'];
            
            container.innerHTML = '';
            
            days.forEach((day, dayIndex) => {
                const dayCard = document.createElement('div');
                dayCard.className = 'bg-white rounded-2xl shadow-lg p-6 mb-6';
                
                let dayHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-xl font-bold text-gray-900">${day}</h4>
                        <div class="text-sm text-gray-500">
                            <span class="font-semibold text-viet-red">1,950</span> calories
                        </div>
                    </div>
                    <div class="grid md:grid-cols-3 gap-4">
                `;
                
                meals.forEach(meal => {
                    const randomDish = dishes[Math.floor(Math.random() * dishes.length)];
                    dayHTML += `
                        <div class="meal-plan-item">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="text-2xl">${randomDish.image}</div>
                                <div>
                                    <div class="font-semibold text-gray-900">${meal}</div>
                                    <div class="text-sm text-gray-500">${randomDish.name}</div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-600 mb-2">${randomDish.calories} calories ‚Ä¢ ${randomDish.protein}g protein</div>
                            <div class="flex space-x-2">
                                <button class="bg-viet-red text-white px-3 py-1 rounded-lg text-xs hover:bg-red-600 transition-all">
                                    N·∫•u ngay
                                </button>
                                <button class="bg-gray-100 text-gray-700 px-3 py-1 rounded-lg text-xs hover:bg-gray-200 transition-all">
                                    Thay ƒë·ªïi
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                dayHTML += '</div>';
                dayCard.innerHTML = dayHTML;
                container.appendChild(dayCard);
            });
        }

        // Recipes system
        function initializeRecipes() {
            const searchInput = document.getElementById('recipeSearch');
            if (searchInput) {
                searchInput.addEventListener('input', displayRecipes);
            }
            
            ['recipeCategory', 'recipeDifficulty', 'recipeServings'].forEach(filterId => {
                const element = document.getElementById(filterId);
                if (element) {
                    element.addEventListener('change', displayRecipes);
                }
            });
        }

        function displayRecipes() {
            const container = document.getElementById('recipeGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            recipes.forEach(recipe => {
                const recipeCard = document.createElement('div');
                recipeCard.className = 'bg-white rounded-2xl shadow-lg overflow-hidden card-hover cursor-pointer';
                
                recipeCard.innerHTML = `
                    <div class="p-6">
                        <div class="text-6xl text-center mb-4">${recipe.image}</div>
                        <h4 class="font-bold text-lg mb-2">${recipe.name}</h4>
                        <p class="text-gray-600 text-sm mb-4">${recipe.description}</p>
                        
                        <div class="flex items-center justify-between text-sm text-gray-500 mb-4">
                            <span>‚è±Ô∏è ${recipe.time} ph√∫t</span>
                            <span>üë• ${recipe.servings} ng∆∞·ªùi</span>
                            <span>‚≠ê ${recipe.rating}</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex space-x-1">
                                ${recipe.tags.slice(0, 2).map(tag => 
                                    `<span class="bg-viet-gold/20 text-viet-gold px-2 py-1 rounded-full text-xs">#${tag}</span>`
                                ).join('')}
                            </div>
                            <button class="bg-viet-red text-white px-4 py-2 rounded-xl text-sm font-semibold hover:bg-red-600 transition-all" onclick="viewRecipeDetail(${recipe.id})">
                                Xem chi ti·∫øt
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(recipeCard);
            });
        }

        // Health system
        function initializeHealth() {
            updateHealthData();
        }

        function updateHealthData() {
            const mealHistory = document.getElementById('mealHistory');
            if (!mealHistory) return;
            
            const todayMeals = [
                { time: '07:30', meal: 'S√°ng', dish: 'Ph·ªü B√≤', calories: 350, image: 'üçú' },
                { time: '12:15', meal: 'Tr∆∞a', dish: 'Salad Quinoa', calories: 280, image: 'ü•ó' },
                { time: '15:30', meal: 'Snack', dish: 'Smoothie', calories: 150, image: 'ü•§' }
            ];
            
            mealHistory.innerHTML = '';
            
            todayMeals.forEach(meal => {
                const mealItem = document.createElement('div');
                mealItem.className = 'flex items-center justify-between p-4 bg-gray-50 rounded-xl';
                
                mealItem.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <div class="text-3xl">${meal.image}</div>
                        <div>
                            <div class="font-semibold">${meal.dish}</div>
                            <div class="text-sm text-gray-500">${meal.time} ‚Ä¢ ${meal.meal}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-viet-red">${meal.calories}</div>
                        <div class="text-xs text-gray-500">calories</div>
                    </div>
                `;
                
                mealHistory.appendChild(mealItem);
            });
        }

        // Community system
        function initializeCommunity() {
            displayCommunityPosts();
        }

        function displayCommunityPosts() {
            const container = document.getElementById('communityFeed');
            if (!container) return;
            
            container.innerHTML = '';
            
            communityPosts.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'community-post';
                
                postCard.innerHTML = `
                    <div class="flex items-start space-x-4 mb-4">
                        <div class="text-3xl">${post.avatar}</div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-semibold">${post.author}</span>
                                <span class="text-sm text-gray-500">${post.time}</span>
                            </div>
                            <h4 class="font-bold text-lg mb-2">${post.title}</h4>
                            <p class="text-gray-600 mb-3">${post.content}</p>
                            
                            ${post.image ? `<div class="text-6xl text-center my-4">${post.image}</div>` : ''}
                            
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${post.tags.map(tag => 
                                    `<span class="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs">#${tag}</span>`
                                ).join('')}
                            </div>
                            
                            <div class="flex items-center space-x-6 text-sm text-gray-500">
                                <button class="flex items-center space-x-1 hover:text-viet-red transition-all">
                                    <span>üëç</span>
                                    <span>${post.likes}</span>
                                </button>
                                <button class="flex items-center space-x-1 hover:text-viet-red transition-all">
                                    <span>üí¨</span>
                                    <span>${post.comments}</span>
                                </button>
                                <button class="flex items-center space-x-1 hover:text-viet-red transition-all">
                                    <span>üì§</span>
                                    <span>${post.shares}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(postCard);
            });
        }

        // Utility functions
        function getMoodText(mood) {
            const texts = {
                sad: 'bu·ªìn b√£',
                tired: 'm·ªát m·ªèi',
                stressed: 'cƒÉng th·∫≥ng',
                happy: 'vui v·∫ª',
                excited: 'h·ª©ng kh·ªüi',
                normal: 'b√¨nh th∆∞·ªùng'
            };
            return texts[mood] || mood;
        }

        function getRegionText(region)<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'971b4ef5a045ddc2',t:'MTc1NTYyMzg4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
